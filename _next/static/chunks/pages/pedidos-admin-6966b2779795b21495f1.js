_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[16],{"2iJl":function(e,a,t){"use strict";t.r(a);var n=t("rePB"),o=t("h4VS"),r=t("q1tI"),l=t.n(r),d=t("hdTg"),i=t("5D9J"),c=t("xWvD"),s=t("pNC/"),u=t("nOHt"),m=t("LC5b"),p=l.a.createElement;function g(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function b(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?g(Object(t),!0).forEach((function(a){Object(n.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function f(){var e=Object(o.a)(["\n    display: flex;\n    justify-content: flex-end;\n    font-size: 1.2rem;\n    margin: 2rem 1rem;\n    cursor: pointer;\n\n    small {\n        &:hover{\n            background-color: #343a40;\n            padding:0.2rem;\n            color: #fff!important;\n            border-radius: 5px;\n    }\n    }\n    \n"]);return f=function(){return e},e}function v(){var e=Object(o.a)(["\n    height: 40px;\n    margin-top: 2rem;\n"]);return v=function(){return e},e}function N(){var e=Object(o.a)(["\n\n    \n    \n    li {\n        list-style: none;\n        border-bottom: 1px solid #e1e1e1;\n    }\n\n    .input {\n            margin-bottom: 0.5rem;\n            text-align: center;\n        }\n    \n    @media (min-width: 768px) {\n\n        margin: 2% 8rem 5% 8rem; \n        \n\n        .body-card {\n            align-items: center;\n            text-align: center;\n            display: flex;\n            flex-direction: column;\n            justify-content:center;\n            margin-top: 2rem;\n        }\n    }\n\n    \n"]);return N=function(){return e},e}function h(){var e=Object(o.a)(["\n    text-align: center;\n\n    @media (min-width: 768px) {\n        margin-top: 4%;\n    }\n"]);return h=function(){return e},e}function y(){var e=Object(o.a)(["\n    @media (min-width: 768px) {\n        margin: 1% 8rem; \n        \n    }\n"]);return y=function(){return e},e}function E(){var e=Object(o.a)(["\n\n    padding: 1rem;\n    margin: 1rem;\n    font-weight: bold;\n    color: white;\n\n    @media (min-width: 768px) {\n        margin: 5% 45% 1% 45%; \n        align-items: center;\n        text-align: center;\n        border: 1px solid #e1e1e1;\n        display: inline-block;\n        padding: 1rem 1.5rem;\n        border-radius: 5px;\n        cursor: pointer;\n    }\n"]);return E=function(){return e},e}function O(){var e=Object(o.a)(["\n    text-align: center;\n\n    @media (min-width: 768px) {\n        margin-top: 5%; \n    }\n"]);return O=function(){return e},e}var P=i.a.h2(O()),x=i.a.h5(E()),j=i.a.div(y()),C=i.a.div(h()),w=i.a.div(N()),k=i.a.div(v()),T=i.a.p(f());a.default=function(){var e=Object(r.useState)([]),a=e[0],t=e[1],o=Object(r.useState)({tiempoentrega:"",estadopago:"",estadoentrega:""}),i=o[0],g=o[1],f=Object(r.useState)(!1),v=f[0],N=f[1],h=Object(r.useState)({busquedageneral:"",estadoentrega:"",metodopago:""}),y=h[0],E=h[1],O=Object(r.useState)([]),L=O[0],D=O[1],S=Object(r.useState)(!1),_=S[0],q=S[1],B=Object(r.useContext)(c.a),z=B.firebase,R=(B.usuario,Object(s.a)().admin),M=Object(m.a)(),J=(M.productoEliminar,M.guardarPedidoEliminar),V=M.guardarConfirmacionEliminarProducto;Object(u.useRouter)();function F(e){var a=e.docs.map((function(e){return b({idtotalpedidos:e.id},e.data())}));t(a)}Object(r.useEffect)((function(){z.db.collection("totalpedidos").orderBy("fechapedido","asc").onSnapshot(F)}),[]),Object(r.useEffect)((function(){if(void 0===y.busquedageneral);else{!function(){var e=y.busquedageneral.toLowerCase(),t=a.filter((function(a){return a.promedioentrega.toLowerCase().includes(e)||a.estadopago.toLowerCase().includes(e)||a.metodopago.toLowerCase().includes(e)||a.tipoentrega.toLowerCase().includes(e)||a.clientedatos.nombre.toLowerCase().includes(e)||a.estadoentrega.toLowerCase().includes(e)||a.reference.toLowerCase().includes(e)}));D(t)}()}}),[y,a]),Object(r.useEffect)((function(){if(""!==y.estadoentrega&&void 0===y.metodopago&&void 0===y.busquedageneral){!function(){var e=y.estadoentrega,t=a.filter((function(a){return a.estadoentrega===e}));D(t)}()}}),[y,a]);var H=function(e){var a=z.db.collection("totalpedidos").doc(e);""===i.tiempoentrega||a.update({promedioentrega:i.tiempoentrega});""===i.estadopago||a.update({estadopago:i.estadopago});""===i.estadoentrega||a.update({estadoentrega:i.estadoentrega})},I=function(e){console.log(e),J(e)},W=function(){V(!0)},X=function(){V(!1),J("")},$=function(){V(!1),J("")};return p(d.a,null,0===a.length?p(C,{className:"card-header"},"Aun no Hay Pedidos"):null,R&&0!==a.length?p(x,{className:"bg-dark",onClick:function(){v?(N(!1),q(!1)):(N(!0),q(!0))}},"Buscar"):null,v?p(j,{className:"accordion ",id:"accordionExample"},p("div",{className:"card"},p("div",{className:"card-header",id:"headingOne"},p("h2",{className:"mb-0"},p("button",{className:"btn nav-link btn-block text-left",type:"button","data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"},"Buscar en Todo"))),p("div",{id:"collapseOne",className:"collapse show","aria-labelledby":"headingOne","data-parent":"#accordionExample"},p("div",{className:"card-body"},p("input",{name:"busquedageneral",onChange:function(e){return E(b(b({},i),{},Object(n.a)({},e.target.name,e.target.value)))},className:"form-control input",placeholder:"Buscar en general",type:"text"})))),p("div",{className:"card"},p("div",{className:"card-header",id:"headingTwo"},p("h2",{className:"mb-0"},p("button",{className:"btn nav-link btn-block text-left collapsed",type:"button","data-toggle":"collapse","data-target":"#collapseTwo","aria-expanded":"false","aria-controls":"collapseTwo"},"Buscar por estado de entrega"))),p("div",{id:"collapseTwo",className:"collapse","aria-labelledby":"headingTwo","data-parent":"#accordionExample"},p("div",{className:"card-body"},p("select",{type:"text",name:"estadoentrega",className:"form-control input",onChange:function(e){return E(b(b({},i),{},Object(n.a)({},e.target.name,e.target.value)))}},p("option",{value:""},"Estado de entrega"),p("option",{value:"pendiente"},"Pendiente"),p("option",{value:"en proceso"},"En Proceso"),p("option",{value:"entregado"},"Entregado"),p("option",{value:"cancelado"},"Cancelado")))))):null,_?p("div",null,L.map((function(e){return p(w,{className:"card bg-light my-2"},p(l.a.Fragment,null,"entregado"===e.estadoentrega?p("div",{className:"alert alert-info "},"Pedido Entregado"):null,"pendiente"===e.estadoentrega?p("div",{className:"alert alert-warning "},"Pedido Pendiente"):null,"cancelado"===e.estadoentrega?p("div",{className:"alert alert-danger "},"Pedido Cancelado"):null,"en proceso"===e.estadoentrega?p("div",{className:"alert alert-primary "},"Pedido En Proceso"):null,p("div",{className:"card-body body-card my-1"},p("h5",{className:"card-title"},"Referencia: ",e.reference," "),p("h6",{className:"card-title"},"Tiempo Estimado de Entrega: ",e.promedioentrega," "),p("h6",{className:"card-title"},"Tipo de Entrega: ",e.tipoentrega," "),p("h6",{className:"card-title"},"Metodo de Pago: ",e.metodopago," "),"pendiente"===e.estadopago?p("h6",{className:"card-title alert alert-warning"},"Estado del Pago: ",e.estadopago," "):null,"pagado"===e.estadopago?p("h6",{className:"card-title alert alert-info"},"Estado del Pago: ",e.estadopago," "):null,"rechazado"===e.estadopago?p("h6",{className:"card-title alert alert-danger"},"Estado del Pago: ",e.estadopago," "):null,""===e.observaciones.observacion?null:p("h6",{className:"card-title"},"Observaciones del Pedido: ",e.observaciones.observacion," "),p("p",null,p("button",{className:"btn btn-primary",type:"button","data-toggle":"collapse","data-target":"#ver-productos","aria-expanded":"false","aria-controls":"collapseExample"},"Ver Productos")),p("div",{class:"collapse",id:"ver-productos"},p("div",{class:"card card-body"},e.productos.map((function(e){return p("li",null,p("p",null,"Nombre: ",e.nombre),p("p",null,"Cantidad: ",e.cantidad))})))),p("h4",null,"Valor del Pedido: $",e.preciofinal),p("div",{class:"card card-body my-1"},p("h5",null,"Datos del Cliente"),p("p",null,"Nombre: ",e.clientedatos.nombre),void 0===e.clientedatos.numero||void 0===e.clientedatos.direccion||void 0===e.clientedatos.barrio?null:p("li",null,p("p",null,"Numero: ",e.clientedatos.numero),p("p",null,"Barrio: ",e.clientedatos.barrio),p("p",null,"Direccion: ",e.clientedatos.direccion))),p("div",{class:"card card-body"},p("h5",null,"Editar Datos"),p("input",{name:"tiempoentrega",onChange:function(e){return g(b(b({},i),{},Object(n.a)({},e.target.name,e.target.value)))},className:"form-control input",placeholder:"Tiempo Entrega",type:"text"}),p("select",{type:"text",name:"estadopago",className:"form-control input",onChange:function(e){return g(b(b({},i),{},Object(n.a)({},e.target.name,e.target.value)))}},p("option",{value:""},"Estado de pago"),p("option",{value:"pendiente"},"Pendiente"),p("option",{value:"pagado"},"Pagado"),p("option",{value:"rechazado"},"Rechazado")),p("select",{type:"text",name:"estadoentrega",className:"form-control input",onChange:function(e){return g(b(b({},i),{},Object(n.a)({},e.target.name,e.target.value)))}},p("option",{value:""},"Estado de entrega"),p("option",{value:"pendiente"},"Pendiente"),p("option",{value:"en proceso"},"En Proceso"),p("option",{value:"entregado"},"Entregado"),p("option",{value:"cancelado"},"Cancelado")),p("button",{class:"btn btn-primary",onClick:function(){return H(e.idtotalpedidos)}}," Editar"))),R?p(l.a.Fragment,null,p(T,{onClick:function(){return I(e.idtotalpedidos)},className:"card-text",type:"button","data-toggle":"modal","data-target":"#modal-eliminacion"},p("small",{className:"text-muted"},"Eliminar")),p("div",{className:"modal fade",id:"modal-eliminacion","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},p("div",{className:"modal-dialog"},p("div",{className:"modal-content"},p("div",{className:"modal-header"},p("h5",{className:"modal-title",id:"exampleModalLabel"},"Eliminar?"),p("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return $()}},p("span",{"aria-hidden":"true"},"\xd7"))),p("div",{className:"modal-body"},"Realmente desea Eliminar este Producto?"),p("div",{className:"modal-footer"},p("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){return X()}},"Cancelar"),p("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:function(){return W()}},"Eliminar")))))):null))}))):null,R?null:p(P,null,"No tienes Permiso de Estar aqui"),!R||_?null:p("div",null,a.map((function(e){return p(w,{className:"card bg-light my-2"},p(l.a.Fragment,null,"entregado"===e.estadoentrega?p("div",{className:"alert alert-info "},"Pedido Entregado"):null,"pendiente"===e.estadoentrega?p("div",{className:"alert alert-warning "},"Pedido Pendiente"):null,"cancelado"===e.estadoentrega?p("div",{className:"alert alert-danger "},"Pedido Cancelado"):null,"en proceso"===e.estadoentrega?p("div",{className:"alert alert-primary "},"Pedido En Proceso"):null,p("div",{className:"card-body body-card my-1"},p("h5",{className:"card-title"},"Referencia: ",e.reference," "),p("h6",{className:"card-title"},"Tiempo Estimado de Entrega: ",e.promedioentrega," "),p("h6",{className:"card-title"},"Tipo de Entrega: ",e.tipoentrega," "),p("h6",{className:"card-title"},"Metodo de Pago: ",e.metodopago," "),"pendiente"===e.estadopago?p("h6",{className:"card-title alert alert-warning my-1"},"Estado del Pago: ",e.estadopago," "):null,"pagado"===e.estadopago?p("h6",{className:"card-title alert alert-info"},"Estado del Pago: ",e.estadopago," "):null,"rechazado"===e.estadopago?p("h6",{className:"card-title alert alert-danger"},"Estado del Pago: ",e.estadopago," "):null,""===e.observaciones.observacion?null:p("h6",{className:"card-title"},"Observaciones del Pedido: ",e.observaciones.observacion," "),p("p",null,p("button",{class:"btn btn-primary",type:"button","data-toggle":"collapse","data-target":"#ver-productos","aria-expanded":"false","aria-controls":"collapseExample"},"Ver Productos")),p("div",{class:"collapse",id:"ver-productos"},p("div",{class:"card card-body"},e.productos.map((function(e){return p("li",null,p("p",null,"Nombre: ",e.nombre),p("p",null,"Cantidad: ",e.cantidad))})))),p("h4",null,"Valor del Pedido: $",e.preciofinal),p("div",{class:"card card-body my-1"},p("h5",null,"Datos del Cliente"),p("p",null,"Nombre: ",e.clientedatos.nombre),void 0===e.clientedatos.numero||void 0===e.clientedatos.direccion||void 0===e.clientedatos.barrio?null:p("li",null,p("p",null,"Numero: ",e.clientedatos.numero),p("p",null,"Barrio: ",e.clientedatos.barrio),p("p",null,"Direccion: ",e.clientedatos.direccion))),p("div",{class:"card card-body"},p("h5",null,"Editar Datos"),p("input",{name:"tiempoentrega",onChange:function(e){return g(b(b({},i),{},Object(n.a)({},e.target.name,e.target.value)))},className:"form-control input",placeholder:"Tiempo Entrega",type:"text"}),p("select",{type:"text",name:"estadopago",className:"form-control input",onChange:function(e){return g(b(b({},i),{},Object(n.a)({},e.target.name,e.target.value)))}},p("option",{value:""},"Estado de pago"),p("option",{value:"pendiente"},"Pendiente"),p("option",{value:"pagado"},"Pagado"),p("option",{value:"rechazado"},"Rechazado")),p("select",{type:"text",name:"estadoentrega",className:"form-control input",onChange:function(e){return g(b(b({},i),{},Object(n.a)({},e.target.name,e.target.value)))}},p("option",{value:""},"Estado de entrega"),p("option",{value:"pendiente"},"Pendiente"),p("option",{value:"en proceso"},"En Proceso"),p("option",{value:"entregado"},"Entregado"),p("option",{value:"cancelado"},"Cancelado")),p("button",{class:"btn btn-primary",onClick:function(){return H(e.idtotalpedidos)}}," Editar"))),R?p(l.a.Fragment,null,p(T,{onClick:function(){return I(e.idtotalpedidos)},className:"card-text",type:"button","data-toggle":"modal","data-target":"#modal-eliminacion"},p("small",{className:"text-muted"},"Eliminar")),p("div",{className:"modal fade",id:"modal-eliminacion","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},p("div",{className:"modal-dialog"},p("div",{className:"modal-content"},p("div",{className:"modal-header"},p("h5",{className:"modal-title",id:"exampleModalLabel"},"Eliminar?"),p("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return $()}},p("span",{"aria-hidden":"true"},"\xd7"))),p("div",{className:"modal-body"},"Realmente desea Eliminar este Producto?"),p("div",{className:"modal-footer"},p("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){return X()}},"Cancelar"),p("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:function(){return W()}},"Eliminar")))))):null))}))),p(k,null))}},LC5b:function(e,a,t){"use strict";var n=t("q1tI"),o=t("xWvD");a.a=function(){var e=Object(n.useState)(""),a=e[0],t=e[1],r=Object(n.useState)(""),l=r[0],d=r[1],i=Object(n.useState)(!1),c=i[0],s=i[1],u=Object(n.useContext)(o.a),m=u.firebase;u.usuario;return Object(n.useEffect)((function(){!function(){if(""!==a&&c){var e=m.db.collection("productos").doc(a);console.log(e.id),e.delete()}}()}),[a,c]),Object(n.useEffect)((function(){!function(){if(""!==l&&c){var e=m.db.collection("totalpedidos").doc(l);console.log(e.id),e.delete()}}()}),[l,c]),{productoEliminar:a,guardarProductoEliminar:t,guardarPedidoEliminar:d,guardarConfirmacionEliminarProducto:s}}},sN0p:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pedidos-admin",function(){return t("2iJl")}])}},[["sN0p",1,2,4,5,0,3,6]]]);