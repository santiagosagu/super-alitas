_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[14],{KQpA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n("q1tI"),i=c(a),s=c(n("zpNE")),l=c(n("hu/m"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e){var t=/(?:\.([^.]+))?$/.exec(e);return null!=t&&null!=t[0]?t[0]:""}var m=function(e){function t(){var e,n,o;u(this,t);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=o=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.uploadTasks=[],o.handleFileSelection=function(e){for(var t=e.target.files,n=0;n<t.length;n++)o.startUpload(t[n])},p(o,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillUnmount",value:function(){this.cancelRunningUploads()}},{key:"cancelRunningUploads",value:function(){for(;this.uploadTasks.length>0;){var e=this.uploadTasks.pop();"running"===e.snapshot.state&&e.cancel()}}},{key:"removeTask",value:function(e){for(var t=0;t<this.uploadTasks.length;t++)if(this.uploadTasks[t]===e)return void this.uploadTasks.splice(t,1)}},{key:"startUpload",value:function(e){var t=this,n=this.props,o=n.onUploadStart,r=n.onProgress,a=n.onUploadError,i=n.onUploadSuccess,c=n.storageRef,u=n.metadata,p=n.randomizeFilename,m=n.filename,d=void 0;f(d=m?"function"===typeof m?m(e):m:p?(0,s.default)():e.name)||(d+=f(e.name)),Promise.resolve().then((function(){return e.type.match(/image.*/)&&(t.props.maxWidth||t.props.maxHeight)?(0,l.default)(e,t.props.maxWidth,t.props.maxHeight):e})).then((function(e){var n=c.child(d).put(e,u);o&&o(e,n),n.on("state_changed",(function(e){return r&&r(Math.round(100*e.bytesTransferred/e.totalBytes),n)}),(function(e){return a&&a(e,n)}),(function(){return t.removeTask(n),i&&i(n.snapshot.metadata.name,n)})),t.uploadTasks.push(n)}))}},{key:"render",value:function(){var e=this.props,t=(e.storageRef,e.onUploadStart,e.onProgress,e.onUploadSuccess,e.onUploadError,e.randomizeFilename,e.metadata,e.filename,e.maxWidth,e.maxHeight,e.hidden),n=e.as,r=void 0===n?"input":n,a=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["storageRef","onUploadStart","onProgress","onUploadSuccess","onUploadError","randomizeFilename","metadata","filename","maxWidth","maxHeight","hidden","as"]),s=t?Object.assign({},a.style,{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1}):a.style;return i.default.createElement(r,o({type:"file",onChange:this.handleFileSelection},a,{style:s}))}}]),t}(a.Component);t.default=m},Sfbb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var o=atob(this.toDataURL(t,n).split(",")[1]),r=o.length,a=new Uint8Array(r),i=0;i<r;i++)a[i]=o.charCodeAt(i);e(new Blob([a],{type:t||"image/png"}))}})}},TCLN:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/nuevo-producto",function(){return n("cf6P")}])},V5hS:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var o=new Uint8Array(16);e.exports=function(){return n(o),o}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},cf6P:function(e,t,n){"use strict";n.r(t);var o=n("o0o1"),r=n.n(o),a=n("HaE+"),i=n("rePB"),s=n("h4VS"),l=n("q1tI"),c=n.n(l),u=n("HvpM"),p=n("hdTg"),f=n("5D9J"),m=n("nOHt"),d=n.n(m),h=n("KQpA"),b=n.n(h),g=n("pNC/"),v=c.a.createElement;function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(){var e=Object(s.a)(["\n    height: 50rem;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding: 1rem;\n    \n    \n    form {\n        width: 90%;\n    }\n\n    @media (min-width: 768px) {\n\n        h1 {\n            margin-top: 4rem;\n        }\n\n        form {\n            padding: 2rem;\n            width: 550px;   \n        }\n    }\n"]);return O=function(){return e},e}var j=f.a.div(O());t.default=function(){var e=Object(l.useState)({nombre:"",categoria:"",descripcion:"",imagen:"",precio:"",creado:Date.now()}),t=e[0],n=e[1],o=Object(l.useState)({error:!1,mensaje:""}),s=o[0],c=o[1],f=t.nombre,m=t.categoria,h=t.descripcion,y=t.precio,O=Object(l.useState)(!1),P=(O[0],O[1]),x=Object(l.useState)(0),N=(x[0],x[1]),_=Object(l.useState)(""),S=_[0],E=_[1],C=Object(l.useState)(""),T=(C[0],C[1]),U=Object(l.useContext)(u.a),k=U.usuario,R=U.firebase,M=Object(g.a)().admin;Object(l.useEffect)((function(){n(w(w({},t),{},{imagen:S}))}),[S]);var F=function(){var e=Object(a.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),0!==f.trim().length&&0!==m.trim().length&&0!==h.trim().length&&0!==y){e.next=5;break}return c({error:!0,mensaje:"Todos los campos son requeridos"}),setTimeout((function(){c({error:!1,mensaje:""})}),3e3),e.abrupt("return");case 5:if(k){e.next=7;break}return e.abrupt("return",d.a.push("/"));case 7:return R.db.collection("productos").add(t),e.abrupt("return",d.a.push("/menu"));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return v(p.a,null,M?v(j,null,v("h1",null,"Nuevo Producto"),s.error?v("div",{class:"alert alert-danger",role:"alert"},s.mensaje):null,v("form",{onSubmit:F},v("div",{className:"form-group row"},v("label",{htmlFor:"staticEmail",className:"col-sm-2 col-form-label"},"Nombre"),v("div",{className:"col-sm-10"},v("input",{type:"text",name:"nombre",className:"form-control",onChange:function(e){return n(w(w({},t),{},Object(i.a)({},e.target.name,e.target.value)))}}))),v("div",{className:"form-group row"},v("label",{htmlFor:"staticEmail",className:"col-sm-2 col-form-label"},"Categoria"),v("div",{className:"col-sm-10"},v("select",{type:"text",name:"categoria",className:"form-control",onChange:function(e){return n(w(w({},t),{},Object(i.a)({},e.target.name,e.target.value)))}},v("option",{value:""},"--Selecciona--"),v("option",{value:"alitas"},"Alitas"),v("option",{value:"patacones"},"Patacones"),v("option",{value:"papas chips"},"Papas Chips"),v("option",{value:"costillas"},"Costillas"),v("option",{value:"bombon de pollo"},"Bombon de Pollo"),v("option",{value:"salchipapas"},"Salchipapas"),v("option",{value:"qbano"},"Q'Banos")))),v("div",{className:"form-group row"},v("label",{htmlFor:"inputPassword",className:"col-sm-2 col-form-label "},"Descripcion"),v("div",{className:"col-sm-10"},v("textarea",{type:"text",rows:"4",name:"descripcion",className:"form-control",onChange:function(e){return n(w(w({},t),{},Object(i.a)({},e.target.name,e.target.value)))}}))),v("div",{className:"form-group row"},v("label",{htmlFor:"staticEmail",className:"col-sm-2 col-form-label"},"Imagen"),v("div",{className:"col-sm-10"},v(b.a,{accept:"image/*",name:"imagen",randomizeFilename:!0,storageRef:R.storage.ref("productos"),onUploadStart:function(){N(0),P(!0)},onUploadError:function(e){P(e),console.error(e)},onUploadSuccess:function(e){N(100),P(!1),T(e),R.storage.ref("productos").child(e).getDownloadURL().then((function(e){console.log(e),E(e)}))},onProgress:function(e){return N({progreso:e})}}))),v("div",{className:"form-group row"},v("label",{htmlFor:"staticEmail",className:"col-sm-2 col-form-label"},"Precio"),v("div",{className:"col-sm-10"},v("input",{type:"text",name:"precio",className:"form-control",onChange:function(e){return n(w(w({},t),{},Object(i.a)({},e.target.name,parseInt(e.target.value,10))))}}))),v("button",{type:"submit",className:"btn btn-primary form-control"},"Crear Producto"))):v(j,null,v("h1",null,"No Tienes Permiso de estar aqui...")))}},"hu/m":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){HTMLCanvasElement.prototype.toBlob||(0,a.default)();return new Promise((function(o,r){var a=new FileReader;a.onload=function(a){var i=new Image;i.onload=function(a){var s=document.createElement("canvas"),l=t||i.width,c=n||i.height;s.width=l,s.height=c;var u=l/i.width,p=c/i.height,f=Math.max(u,p),m=f*i.width,d=f*i.height,h=Math.min((c-d)/2,0),b=Math.min((l-m)/2,0),g=s.getContext("2d");if(!g)return r("Could not get the context of the canvas element");g.drawImage(i,b,h,m,d),s.toBlob((function(e){o(e)}),e.type)},i.src=a.target.result},a.readAsDataURL(e)}))};var o,r=n("Sfbb"),a=(o=r)&&o.__esModule?o:{default:o}},rnWd:function(e,t){for(var n=[],o=0;o<256;++o)n[o]=(o+256).toString(16).substr(1);e.exports=function(e,t){var o=t||0,r=n;return[r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]]].join("")}},zpNE:function(e,t,n){var o=n("V5hS"),r=n("rnWd");e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||o)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var s=0;s<16;++s)t[a+s]=i[s];return t||r(i)}}},[["TCLN",1,2,4,5,0,3,6]]]);